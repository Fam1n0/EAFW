<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>I W V</title><style>body{margin:0;overflow:hidden;background-color:black;color:white;font-family:Arial,sans-serif}#controls{position:absolute;top:20px;left:20px;z-index:1;color:#fff;display:none;background-color:rgba(0,0,0,0.8);padding:10px;border-radius:5px;max-width:90%;max-height:80%;overflow:auto}.slider{width:100%;margin-bottom:10px}.slider-label{display:flex;justify-content:space-between}#toggleButton,#fullScreenButton{position:absolute;top:20px;z-index:2;background-color:rgba(255,255,255,0.8);color:black;border:none;padding:10px;cursor:pointer;border-radius:5px}#toggleButton{right:20px}#fullScreenButton{right:140px}#resetButton{position:absolute;top:60px;right:20px;z-index:2;background-color:rgba(255,255,255,0.8);color:black;border:none;padding:10px;cursor:pointer;border-radius:5px}#inputSection{position:absolute;top:60px;left:20px;z-index:3}#outputSection{position:absolute;top:120px;left:20px;z-index:3;color:white}#inputSection input,#inputSection button{margin-bottom:10px;padding:5px;width:100%}#inputSection button{background-color:rgba(255,255,255,0.8);color:black;border:none;cursor:pointer;border-radius:5px}</style></head><body><button id="toggleButton">Show Controls</button><button id="fullScreenButton">Full Screen</button><button id="resetButton">Reset</button><div id="controls"><div id="layerControls"></div><button id="saveButton">Save</button></div><div id="inputSection"><input type="text" id="textInput" placeholder="Enter words" /><button id="processButton">Process</button></div><div id="outputSection"><p id="outputText"></p></div><audio id="singingBowlSound" src="path_to_tibetan_singing_bowl_sound.mp3" loop></audio><script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script><script>const hexagrams=[...Array(64).keys()],colors=['#32CD32','#1E90FF','#FFD700','#FF4500','#FFC0CB','#A52A2A','#800080','#F0E68C'],hexagramMeanings={0:'Creative Power',1:'The Receptive',2:'Difficulty at the Beginning',3:'Youthful Folly',4:'Waiting',5:'Conflict',6:'The Army',7:'Holding Together',8:'Small Taming',9:'Treading',10:'Peace',11:'Standstill',12:'Fellowship with Men',13:'Great Possession',14:'Modesty',15:'Enthusiasm',16:'Following',17:'Work on the Decayed',18:'Approach',19:'Contemplation',20:'Bite Through',21:'Grace',22:'Splitting Apart',23:'Return',24:'Innocence',25:'The Taming Power of the Great',26:'The Corners of the Mouth',27:'Preponderance of the Great',28:'The Abysmal',29:'The Clinging',30:'Influence',31:'Duration',32:'Retreat',33:'Great Power',34:'Progress',35:'Darkening of the Light',36:'The Family',37:'Opposition',38:'Obstruction',39:'Deliverance',40:'Decrease',41:'Increase',42:'Breakthrough',43:'Coming to Meet',44:'Gathering Together',45:'Pushing Upward',46:'Oppression',47:'The Well',48:'Revolution',49:'The Cauldron',50:'The Arousing',51:'Keeping Still',52:'Development',53:'Marrying Maiden',54:'Abundance',55:'The Wanderer',56:'The Gentle',57:'The Joyous',58:'Dispersion',59:'Limitation',60:'Inner Truth',61:'Small Preponderance',62:'After Completion',63:'Before Completion'};function getRandomHexagram(){return hexagrams[Math.floor(Math.random()*hexagrams.length)];}function getHexagramMeaning(hexagram){return hexagramMeanings[hexagram];}let scene,camera,renderer,layers=[],audio=document.getElementById('singingBowlSound');function init(){scene=new THREE.Scene();camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);camera.position.z=5;renderer=new THREE.WebGLRenderer();renderer.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(renderer.domElement);document.getElementById('saveButton').addEventListener('click',saveImage);document.getElementById('toggleButton').addEventListener('click',toggleControls);document.getElementById('processButton').addEventListener('click',processInput);document.getElementById('fullScreenButton').addEventListener('click',toggleFullScreen);document.getElementById('resetButton').addEventListener('click',resetVisualization);window.addEventListener('resize',onWindowResize,false);window.addEventListener('wheel',onDocumentMouseWheel,false);renderer.domElement.addEventListener('touchstart',onTouchStart,false);renderer.domElement.addEventListener('touchmove',onTouchMove,false);audio.play();for(let i=0;i<64;i++)addLayer();}function toggleControls(){const controls=document.getElementById('controls'),toggleButton=document.getElementById('toggleButton');controls.style.display=controls.style.display==='none'?'block':'none';toggleButton.textContent=controls.style.display==='none'?'Show Controls':'Hide Controls';}function toggleFullScreen(){if(!document.fullscreenElement){document.documentElement.requestFullscreen();}else{if(document.exitFullscreen){document.exitFullscreen();}}}function resetVisualization(){layers.forEach(layer=>scene.remove(layer.mesh));layers=[];document.getElementById('layerControls').innerHTML='';document.getElementById('outputText').innerHTML='';for(let i=0;i<64;i++)addLayer();}function addLayer(){const hexagram=getRandomHexagram(),layerControls=document.getElementById('layerControls'),layerDiv=document.createElement('div'),color=colors[layers.length%colors.length],speed=Math.random()*2-1,amplitude=Math.random()*2,separation=Math.random(),direction=Math.random()*360;layerDiv.innerHTML=`<div class="slider-label"><label for="speedSlider${layers.length}">Layer ${layers.length+1} Speed:</label><span id="speedValue${layers.length}">${speed.toFixed(2)}</span></div><input type="range" id="speedSlider${layers.length}" class="slider" min="-2" max="2" step="0.01" value="${speed}"><div class="slider-label"><label for="amplitudeSlider${layers.length}">Layer ${layers.length+1} Amplitude:</label><span id="amplitudeValue${layers.length}">${amplitude.toFixed(2)}</span></div><input type="range" id="amplitudeSlider${layers.length}" class="slider" min="0.1" max="2" step="0.01" value="${amplitude}"><div class="slider-label"><label for="separationSlider${layers.length}">Layer ${layers.length+1} Separation:</label><span id="separationValue${layers.length}">${separation.toFixed(2)}</span></div><input type="range" id="separationSlider${layers.length}" class="slider" min="0.01" max="1" step="0.01" value="${separation}"><div class="slider-label"><label for="directionSlider${layers.length}">Layer ${layers.length+1} Direction:</label><span id="directionValue${layers.length}">${direction.toFixed(0)}</span></div><input type="range" id="directionSlider${layers.length}" class="slider" min="0" max="360" step="1" value="${direction}">`;layerControls.appendChild(layerDiv);document.getElementById(`speedSlider${layers.length}`).addEventListener('input',e=>{layers[layers.length-1].uniforms.speed.value=parseFloat(e.target.value);document.getElementById(`speedValue${layers.length}`).textContent=e.target.value;});document.getElementById(`amplitudeSlider${layers.length}`).addEventListener('input',e=>{layers[layers.length-1].uniforms.amplitude.value=parseFloat(e.target.value);document.getElementById(`amplitudeValue${layers.length}`).textContent=e.target.value;});document.getElementById(`separationSlider${layers.length}`).addEventListener('input',e=>{layers[layers.length-1].uniforms.separation.value=parseFloat(e.target.value);document.getElementById(`separationValue${layers.length}`).textContent=e.target.value;});document.getElementById(`directionSlider${layers.length}`).addEventListener('input',e=>{layers[layerslength-1].uniforms.direction.value=parseFloat(e.target.value);document.getElementById(`directionValue${layers.length}`).textContent=e.target.value;});createLayer(layers.length,hexagram,color,{speed,amplitude,separation,direction});}function createLayer(index,hexagram,color,config){const geometry=new THREE.PlaneGeometry(10,10,100,100),uniforms={time:{value:0},speed:{value:config.speed},amplitude:{value:config.amplitude},separation:{value:config.separation},direction:{value:config.direction},touchPosition:{value:new THREE.Vector2(0,0)},color:{value:new THREE.Color(color)}};const material=new THREE.ShaderMaterial({uniforms:uniforms,vertexShader:`uniform float time;uniform float speed;uniform float amplitude;uniform float separation;uniform float direction;uniform vec2 touchPosition;varying vec2 vUv;void main(){vUv=uv;vec3 pos=position;float angle=radians(direction);float dx=cos(angle)*position.x-sin(angle)*position.y;float dy=sin(angle)*position.x+cos(angle)*position.y;float dist=length(vec2(dx,dy)-touchPosition);pos.z+=sin((dx+dy)*10.0-time*speed-dist)*amplitude;pos.z+=separation*${index-1}.0;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.0);}`,fragmentShader:`uniform vec3 color;varying vec2 vUv;void main(){gl_FragColor=vec4(color,1.0)*vec4(vUv,1.0,1.0);}`,transparent:true,opacity:0.5});const plane=new THREE.Mesh(geometry,material);scene.add(plane);layers.push({mesh:plane,uniforms:uniforms});}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight);}function onDocumentMouseWheel(event){camera.position.z+=event.deltaY*0.01;}function animate(){requestAnimationFrame(animate);layers.forEach(layer=>{layer.uniforms.time.value+=0.01;});renderer.render(scene,camera);}function saveImage(){renderer.render(scene,camera);const link=document.createElement('a');link.href=renderer.domElement.toDataURL('image/png');link.download=`wave_visualization_${Date.now()}.png`;link.click();}function onTouchStart(event){event.preventDefault();const touch=event.touches[0],x=(touch.clientX/window.innerWidth)*2-1,y=-(touch.clientY/window.innerHeight)*2+1;layers.forEach(layer=>{layer.uniforms.touchPosition.value.set(x,y);});}function onTouchMove(event){event.preventDefault();const touch=event.touches[0],x=(touch.clientX/window.innerWidth)*2-1,y=-(touch.clientY/window.innerHeight)*2+1;layers.forEach(layer=>{layer.uniforms.touchPosition.value.set(x,y);});}function processInput(){const input=document.getElementById('textInput').value.toUpperCase();if(input){layers.forEach((layer,index)=>{if(index<input.length){const letter=input[index];const config=getLetterConfig(letter);layer.uniforms.speed.value=config.speed;layer.uniforms.amplitude.value=config.amplitude;layer.uniforms.separation.value=config.separation;layer.uniforms.direction.value=config.direction;}});displayResponse();}}function displayResponse(){let response='';layers.forEach(layer=>{const speed=layer.uniforms.speed.value,amplitude=layer.uniforms.amplitude.value,separation=layer.uniforms.separation.value,direction=layer.uniforms.direction.value,hexagram=Math.floor((speed+amplitude+separation+direction)%64),meaning=getHexagramMeaning(hexagram);response+=`Hexagram: ${hexagram}, Meaning: ${meaning}<br>`;});document.getElementById('outputText').innerHTML=response;}function getLetterConfig(letter){const letters={'A':{speed:0.5,amplitude:0.5,separation:0.2,direction:0},'B':{speed:0.6,amplitude:0.6,separation:0.2,direction:10},'C':{speed:0.4,amplitude:0.4,separation:0.2,direction:20},'D':{speed:0.7,amplitude:0.7,separation:0.3,direction:30},'E':{speed:0.3,amplitude:0.3,separation:0.1,direction:40},'F':{speed:0.8,amplitude:0.8,separation:0.4,direction:50},'G':{speed:0.9,amplitude:0.9,separation:0.5,direction:60},'H':{speed:0.5,amplitude:0.5,separation:0.2,direction:70},'I':{speed:0.6,amplitude:0.6,separation:0.2,direction:80},'J':{speed:0.4,amplitude:0.4,separation:0.2,direction:90},'K':{speed:0.7,amplitude:0.7,separation:0.3,direction:100},'L':{speed:0.3,amplitude:0.3,separation:0.1,direction:110},'M':{speed:0.8,amplitude:0.8,separation:0.4,direction:120},'N':{speed:0.9,amplitude:0.9,separation:0.5,direction:130},'O':{speed:0.5,amplitude:0.5,separation:0.2,direction:140},'P':{speed:0.6,amplitude:0.6,separation:0.2,direction:150},'Q':{speed:0.4,amplitude:0.4,separation:0.2,direction:160},'R':{speed:0.7,amplitude:0.7,separation:0.3,direction:170},'S':{speed:0.3,amplitude:0.3,separation:0.1,direction:180},'T':{speed:0.8,amplitude:0.8,separation:0.4,direction:190},'U':{speed:0.9,amplitude:0.9,separation:0.5,direction:200},'V':{speed:0.5,amplitude:0.5,separation:0.2,direction:210},'W':{speed:0.6,amplitude:0.6,separation:0.2,direction:220},'X':{speed:0.4,amplitude:0.4,separation:0.2,direction:230},'Y':{speed:0.7,amplitude:0.7,separation:0.3,direction:240},'Z':{speed:0.3,amplitude:0.3,separation:0.1,direction:250}};return letters[letter]||letters['A'];}init();animate();</script></body></html>
